/* virtuals-tuan/home header150706.js Date:2015-07-13 17:55:18 */
~function(a){a.fn.srhfix=function(b){"use strict";var c={tmpl:'<li><a href="{surl}" target="_blank">{tag}</a></li>',sInput:a(this).find("#key-tuan"),sTipbox:a(this).find("#shelper"),sClosedBtn:a(this).find("#shelperBtn"),isAuto:!1,keyAjaxApi:""},d={template:function(a,b){var c;return a.replace(/#\{(.+?)\}/gi,function(){var f,a=arguments[1].replace(/\s/gi,""),d=arguments[0],e=a.split("||");for(c=0,f=e.length;f>c;c+=1){if(/^default:.*$/.test(e[c])){d=e[c].replace(/^default:/,"");break}if(void 0!==b[e[c]]){d=b[e[c]];break}}return d})},stopEvent:function(a){a.closest("form").bind("click",function(a){a.stopPropagation(),a.cancelBubble=!0})},itemHoverEvent:function(b,c){b.delegate("li[class!=closed]",{mouseenter:function(){a(this).removeClass("select").siblings("li").removeClass("select")},click:function(){var b=a(this).children("a").attr("title"),d=a("#changeCityId").val(),e=a("#searchform").attr("action");return e=e+"?keyword="+encodeURIComponent(b)+"&cs="+d,c.val(b),setTimeout(function(){top.location.href=e},0),!1}})},boxHoverEvent:function(a,b){var c;a.delegate(".i-search","mouseleave",function(){clearTimeout(c),c=setTimeout(function(){b.slideUp(200)},500)}).delegate(".i-search","mouseenter",function(){clearTimeout(c)})},windowClick:function(a){var b=a.data.sInput,c=a.data.sTipbox,d=a.data.initVal;c.is(":visible")&&(c.slideUp(120),""==b.val()&&b.val(d))},init:function(b,c,e,f){d.stopEvent(b),d.itemHoverEvent(f,b),b.keyup(function(c){if(38===c.keyCode||40===c.keyCode){if(f.is(":visible")){var d=f.find("li[class!=closed]"),e=f.find(".select");if(0==e.length)a(d[0]).addClass("select"),b.val(a(d[0]).children("a").text());else{switch(c.keyCode){case 38:var g=e.prev("li[class!=closed]"),g=0==g.length?d.last():g;break;case 40:var g=e.next("li[class!=closed]"),g=0==g.length?a(d[0]):g}a(g).addClass("select").siblings().removeClass("select"),b.val(a(g).children("a").text())}}}else""===b.val()?f.slideDown(120):f.slideUp(120)}).keydown(function(a){return 38===a.keyCode?!1:void 0}).focus(function(a){a.stopPropagation()}).click(function(a){a.stopPropagation(),""===b.val()&&f.slideDown(120)}),e.click(function(){f.slideUp(200)}),a(document).bind("click",{sInput:b,sTipbox:f,initVal:c},d.windowClick)}},e=a.extend({},c,b);return this.each(function(){var b=a(this),c=b.find(e.sInput),f=b.find(e.sTipbox),g=b.find(e.sClosedBtn),h=c.val();d.init(c,h,g,f,b),e.isAuto&&d.boxHoverEvent(b,f)})},a("#search-2013").srhfix({sInput:a("#key-tuan"),sTipbox:a("#shelperTuan"),sClosedBtn:a("#shelperBtn"),isAuto:!0})}(jQuery);
